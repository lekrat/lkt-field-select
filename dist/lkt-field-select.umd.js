(function(w,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("vue"),require("lkt-string-tools"),require("lkt-http-client"),require("lkt-loader"),require("lkt-field-text")):typeof define=="function"&&define.amd?define(["exports","vue","lkt-string-tools","lkt-http-client","lkt-loader","lkt-field-text"],r):(w=typeof globalThis<"u"?globalThis:w||self,r(w.LktFieldSelect={},w.Vue,w.LktStringTools,w.LktHttpClient,w.LktLoader,w.LktFieldText))})(this,function(w,r,H,bn,Vn,kn){"use strict";var Gs=Object.defineProperty;var Js=(w,r,H)=>r in w?Gs(w,r,{enumerable:!0,configurable:!0,writable:!0,value:H}):w[r]=H;var Ne=(w,r,H)=>(Js(w,typeof r!="symbol"?r+"":r,H),H);const Nt=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},Cn=Nt(Vn),vn=Nt(kn);class R{}Ne(R,"NO_OPTIONS_MESSAGE",""),Ne(R,"customResourceOptionSlots",{}),Ne(R,"customResourceValueSlots",{});const Rn=()=>R.NO_OPTIONS_MESSAGE,xn=e=>(R.NO_OPTIONS_MESSAGE=e,!0),Dn=(e,t)=>(R.customResourceOptionSlots[e]=t,!0),Mn=(e,t)=>(R.customResourceValueSlots[e]=t,!0);class Ot{constructor(t=[]){Ne(this,"value");Array.isArray(t)||(t=[]),this.value=[...t]}all(){return this.value}filter(t){if(t==="")return this.all();const n=t.toLowerCase();return this.value.filter(s=>s.label.toLowerCase().indexOf(n)!==-1)}receiveOptions(t){const n=new Set,s=[...this.value,...t],o=[];s.forEach(l=>{let i=[l.value,l.label].join("-");n.has(i)||(o.push(l),n.add(i))}),this.value=o}}function Tn(e,t){const n=new Set(e.split(","));return t?s=>n.has(s.toLowerCase()):s=>n.has(s)}const F=process.env.NODE_ENV!=="production"?Object.freeze({}):{};process.env.NODE_ENV!=="production"&&Object.freeze([]);const G=()=>{},Bn=()=>!1,In=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),P=Object.assign,Pn=Object.prototype.hasOwnProperty,S=(e,t)=>Pn.call(e,t),m=Array.isArray,ee=e=>ye(e)==="[object Map]",$n=e=>ye(e)==="[object Set]",b=e=>typeof e=="function",x=e=>typeof e=="string",Oe=e=>typeof e=="symbol",D=e=>e!==null&&typeof e=="object",Ln=e=>(D(e)||b(e))&&b(e.then)&&b(e.catch),An=Object.prototype.toString,ye=e=>An.call(e),yt=e=>ye(e).slice(8,-1),jn=e=>ye(e)==="[object Object]",He=e=>x(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,bt=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Vt=bt(e=>e.charAt(0).toUpperCase()+e.slice(1)),Hn=bt(e=>e?`on${Vt(e)}`:""),te=(e,t)=>!Object.is(e,t),Fn=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})};let kt;const Ct=()=>kt||(kt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fe(e){if(m(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=x(s)?Wn(s):Fe(s);if(o)for(const l in o)t[l]=o[l]}return t}else if(x(e)||D(e))return e}const Kn=/;(?![^(]*\))/g,zn=/:([^]+)/,Un=/\/\*[^]*?\*\//g;function Wn(e){const t={};return e.replace(Un,"").split(Kn).forEach(n=>{if(n){const s=n.split(zn);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ke(e){let t="";if(x(e))t=e;else if(m(e))for(let n=0;n<e.length;n++){const s=Ke(e[n]);s&&(t+=s+" ")}else if(D(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function vt(e,...t){console.warn(`[Vue warn] ${e}`,...t)}let qn;function Gn(e,t=qn){t&&t.active&&t.effects.push(e)}let ce;class Jn{constructor(t,n,s,o){this.fn=t,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=3,this._trackId=0,this._runnings=0,this._queryings=0,this._depsLength=0,Gn(this,o)}get dirty(){if(this._dirtyLevel===1){this._dirtyLevel=0,this._queryings++,be();for(const t of this.deps)if(t.computed&&(Yn(t.computed),this._dirtyLevel>=2))break;Ve(),this._queryings--}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?3:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=J,n=ce;try{return J=!0,ce=this,this._runnings++,Rt(this),this.fn()}finally{xt(this),this._runnings--,ce=n,J=t}}stop(){var t;this.active&&(Rt(this),xt(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Yn(e){return e.value}function Rt(e){e._trackId++,e._depsLength=0}function xt(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Dt(e.deps[t],e);e.deps.length=e._depsLength}}function Dt(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let J=!0,ze=0;const Mt=[];function be(){Mt.push(J),J=!1}function Ve(){const e=Mt.pop();J=e===void 0?!0:e}function Ue(){ze++}function We(){for(ze--;!ze&&qe.length;)qe.shift()()}function Qn(e,t,n){var s;if(t.get(e)!==e._trackId){t.set(e,e._trackId);const o=e.deps[e._depsLength];o!==t?(o&&Dt(o,e),e.deps[e._depsLength++]=t):e._depsLength++,process.env.NODE_ENV!=="production"&&((s=e.onTrack)==null||s.call(e,P({effect:e},n)))}}const qe=[];function Xn(e,t,n){var s;Ue();for(const o of e.keys())if(!(!o.allowRecurse&&o._runnings)&&o._dirtyLevel<t&&(!o._runnings||t!==2)){const l=o._dirtyLevel;o._dirtyLevel=t,l===0&&(!o._queryings||t!==2)&&(process.env.NODE_ENV!=="production"&&((s=o.onTrigger)==null||s.call(o,P({effect:o},n))),o.trigger(),o.scheduler&&qe.push(o.scheduler))}We()}const Zn=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Ge=new WeakMap,Y=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),Je=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":"");function v(e,t,n){if(J&&ce){let s=Ge.get(e);s||Ge.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=Zn(()=>s.delete(n))),Qn(ce,o,process.env.NODE_ENV!=="production"?{target:e,type:t,key:n}:void 0)}}function K(e,t,n,s,o,l){const i=Ge.get(e);if(!i)return;let c=[];if(t==="clear")c=[...i.values()];else if(n==="length"&&m(e)){const u=Number(s);i.forEach((f,E)=>{(E==="length"||!Oe(E)&&E>=u)&&c.push(f)})}else switch(n!==void 0&&c.push(i.get(n)),t){case"add":m(e)?He(n)&&c.push(i.get("length")):(c.push(i.get(Y)),ee(e)&&c.push(i.get(Je)));break;case"delete":m(e)||(c.push(i.get(Y)),ee(e)&&c.push(i.get(Je)));break;case"set":ee(e)&&c.push(i.get(Y));break}Ue();for(const u of c)u&&Xn(u,3,process.env.NODE_ENV!=="production"?{target:e,type:t,key:n,newValue:s,oldValue:o,oldTarget:l}:void 0);We()}const eo=Tn("__proto__,__v_isRef,__isVue"),Tt=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Oe)),Bt=to();function to(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=p(this);for(let l=0,i=this.length;l<i;l++)v(s,"get",l+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(p)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){be(),Ue();const s=p(this)[t].apply(this,n);return We(),Ve(),s}}),e}function no(e){const t=p(this);return v(t,"has",e),t.hasOwnProperty(e)}class It{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,s){const o=this._isReadonly,l=this._shallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return l;if(n==="__v_raw")return s===(o?l?zt:Kt:l?mo:Ft).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=m(t);if(!o){if(i&&S(Bt,n))return Reflect.get(Bt,n,s);if(n==="hasOwnProperty")return no}const c=Reflect.get(t,n,s);return(Oe(n)?Tt.has(n):eo(n))||(o||v(t,"get",n),l)?c:M(c)?i&&He(n)?c:c.value:D(c)?o?Wt(c):Ut(c):c}}class oo extends It{constructor(t=!1){super(!1,t)}set(t,n,s,o){let l=t[n];if(!this._shallow){const u=ae(l);if(!Ze(s)&&!ae(s)&&(l=p(l),s=p(s)),!m(t)&&M(l)&&!M(s))return u?!1:(l.value=s,!0)}const i=m(t)&&He(n)?Number(n)<t.length:S(t,n),c=Reflect.set(t,n,s,o);return t===p(o)&&(i?te(s,l)&&K(t,"set",n,s,l):K(t,"add",n,s)),c}deleteProperty(t,n){const s=S(t,n),o=t[n],l=Reflect.deleteProperty(t,n);return l&&s&&K(t,"delete",n,void 0,o),l}has(t,n){const s=Reflect.has(t,n);return(!Oe(n)||!Tt.has(n))&&v(t,"has",n),s}ownKeys(t){return v(t,"iterate",m(t)?"length":Y),Reflect.ownKeys(t)}}class Pt extends It{constructor(t=!1){super(!0,t)}set(t,n){return process.env.NODE_ENV!=="production"&&vt(`Set operation on key "${String(n)}" failed: target is readonly.`,t),!0}deleteProperty(t,n){return process.env.NODE_ENV!=="production"&&vt(`Delete operation on key "${String(n)}" failed: target is readonly.`,t),!0}}const so=new oo,ro=new Pt,lo=new Pt(!0),Ye=e=>e,ke=e=>Reflect.getPrototypeOf(e);function Ce(e,t,n=!1,s=!1){e=e.__v_raw;const o=p(e),l=p(t);n||(te(t,l)&&v(o,"get",t),v(o,"get",l));const{has:i}=ke(o),c=s?Ye:n?nt:tt;if(i.call(o,t))return c(e.get(t));if(i.call(o,l))return c(e.get(l));e!==o&&e.get(t)}function ve(e,t=!1){const n=this.__v_raw,s=p(n),o=p(e);return t||(te(e,o)&&v(s,"has",e),v(s,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function Re(e,t=!1){return e=e.__v_raw,!t&&v(p(e),"iterate",Y),Reflect.get(e,"size",e)}function $t(e){e=p(e);const t=p(this);return ke(t).has.call(t,e)||(t.add(e),K(t,"add",e,e)),this}function Lt(e,t){t=p(t);const n=p(this),{has:s,get:o}=ke(n);let l=s.call(n,e);l?process.env.NODE_ENV!=="production"&&Ht(n,s,e):(e=p(e),l=s.call(n,e));const i=o.call(n,e);return n.set(e,t),l?te(t,i)&&K(n,"set",e,t,i):K(n,"add",e,t),this}function At(e){const t=p(this),{has:n,get:s}=ke(t);let o=n.call(t,e);o?process.env.NODE_ENV!=="production"&&Ht(t,n,e):(e=p(e),o=n.call(t,e));const l=s?s.call(t,e):void 0,i=t.delete(e);return o&&K(t,"delete",e,void 0,l),i}function jt(){const e=p(this),t=e.size!==0,n=process.env.NODE_ENV!=="production"?ee(e)?new Map(e):new Set(e):void 0,s=e.clear();return t&&K(e,"clear",void 0,void 0,n),s}function xe(e,t){return function(s,o){const l=this,i=l.__v_raw,c=p(i),u=t?Ye:e?nt:tt;return!e&&v(c,"iterate",Y),i.forEach((f,E)=>s.call(o,u(f),u(E),l))}}function De(e,t,n){return function(...s){const o=this.__v_raw,l=p(o),i=ee(l),c=e==="entries"||e===Symbol.iterator&&i,u=e==="keys"&&i,f=o[e](...s),E=n?Ye:t?nt:tt;return!t&&v(l,"iterate",u?Je:Y),{next(){const{value:h,done:k}=f.next();return k?{value:h,done:k}:{value:c?[E(h[0]),E(h[1])]:E(h),done:k}},[Symbol.iterator](){return this}}}}function z(e){return function(...t){if(process.env.NODE_ENV!=="production"){const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${Vt(e)} operation ${n}failed: target is readonly.`,p(this))}return e==="delete"?!1:e==="clear"?void 0:this}}function io(){const e={get(l){return Ce(this,l)},get size(){return Re(this)},has:ve,add:$t,set:Lt,delete:At,clear:jt,forEach:xe(!1,!1)},t={get(l){return Ce(this,l,!1,!0)},get size(){return Re(this)},has:ve,add:$t,set:Lt,delete:At,clear:jt,forEach:xe(!1,!0)},n={get(l){return Ce(this,l,!0)},get size(){return Re(this,!0)},has(l){return ve.call(this,l,!0)},add:z("add"),set:z("set"),delete:z("delete"),clear:z("clear"),forEach:xe(!0,!1)},s={get(l){return Ce(this,l,!0,!0)},get size(){return Re(this,!0)},has(l){return ve.call(this,l,!0)},add:z("add"),set:z("set"),delete:z("delete"),clear:z("clear"),forEach:xe(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{e[l]=De(l,!1,!1),n[l]=De(l,!0,!1),t[l]=De(l,!1,!0),s[l]=De(l,!0,!0)}),[e,n,t,s]}const[co,ao,uo,fo]=io();function Qe(e,t){const n=t?e?fo:uo:e?ao:co;return(s,o,l)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(S(n,o)&&o in s?n:s,o,l)}const po={get:Qe(!1,!1)},ho={get:Qe(!0,!1)},_o={get:Qe(!0,!0)};function Ht(e,t,n){const s=p(n);if(s!==n&&t.call(e,s)){const o=yt(e);console.warn(`Reactive ${o} contains both the raw and reactive versions of the same object${o==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const Ft=new WeakMap,mo=new WeakMap,Kt=new WeakMap,zt=new WeakMap;function go(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Eo(e){return e.__v_skip||!Object.isExtensible(e)?0:go(yt(e))}function Ut(e){return ae(e)?e:Xe(e,!1,so,po,Ft)}function Wt(e){return Xe(e,!0,ro,ho,Kt)}function Me(e){return Xe(e,!0,lo,_o,zt)}function Xe(e,t,n,s,o){if(!D(e))return process.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=o.get(e);if(l)return l;const i=Eo(e);if(i===0)return e;const c=new Proxy(e,i===2?s:n);return o.set(e,c),c}function ne(e){return ae(e)?ne(e.__v_raw):!!(e&&e.__v_isReactive)}function ae(e){return!!(e&&e.__v_isReadonly)}function Ze(e){return!!(e&&e.__v_isShallow)}function et(e){return ne(e)||ae(e)}function p(e){const t=e&&e.__v_raw;return t?p(t):e}function wo(e){return Fn(e,"__v_skip",!0),e}const tt=e=>D(e)?Ut(e):e,nt=e=>D(e)?Wt(e):e;function M(e){return!!(e&&e.__v_isRef===!0)}function So(e){return M(e)?e.value:e}const No={get:(e,t,n)=>So(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return M(o)&&!M(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Oo(e){return ne(e)?e:new Proxy(e,No)}const Q=[];function yo(e){Q.push(e)}function bo(){Q.pop()}function g(e,...t){be();const n=Q.length?Q[Q.length-1].component:null,s=n&&n.appContext.config.warnHandler,o=Vo();if(s)X(s,n,11,[e+t.join(""),n&&n.proxy,o.map(({vnode:l})=>`at <${_n(n,l.type)}>`).join(`
`),o]);else{const l=[`[Vue warn]: ${e}`,...t];o.length&&l.push(`
`,...ko(o)),console.warn(...l)}Ve()}function Vo(){let e=Q[Q.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function ko(e){const t=[];return e.forEach((n,s)=>{t.push(...s===0?[]:[`
`],...Co(n))}),t}function Co({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,o=` at <${_n(e.component,e.type,s)}`,l=">"+n;return e.props?[o,...vo(e.props),l]:[o+l]}function vo(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(s=>{t.push(...qt(s,e[s]))}),n.length>3&&t.push(" ..."),t}function qt(e,t,n){return x(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:M(t)?(t=qt(e,p(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):b(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=p(t),n?t:[`${e}=`,t])}const ot={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function X(e,t,n,s){let o;try{o=s?e(...s):e()}catch(l){st(l,t,n)}return o}function ue(e,t,n,s){if(b(e)){const l=X(e,t,n,s);return l&&Ln(l)&&l.catch(i=>{st(i,t,n)}),l}const o=[];for(let l=0;l<e.length;l++)o.push(ue(e[l],t,n,s));return o}function st(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let l=t.parent;const i=t.proxy,c=process.env.NODE_ENV!=="production"?ot[n]:`https://vuejs.org/errors/#runtime-${n}`;for(;l;){const f=l.ec;if(f){for(let E=0;E<f.length;E++)if(f[E](e,i,c)===!1)return}l=l.parent}const u=t.appContext.config.errorHandler;if(u){X(u,null,10,[e,i,c]);return}}Ro(e,n,o,s)}function Ro(e,t,n,s=!0){if(process.env.NODE_ENV!=="production"){const o=ot[t];if(n&&yo(n),g(`Unhandled error${o?` during execution of ${o}`:""}`),n&&bo(),s)throw e;console.error(e)}else console.error(e)}let Te=!1,rt=!1;const T=[];let U=0;const oe=[];let $=null,W=0;const Gt=Promise.resolve();let lt=null;const xo=100;function Do(e){const t=lt||Gt;return e?t.then(this?e.bind(this):e):t}function Mo(e){let t=U+1,n=T.length;for(;t<n;){const s=t+n>>>1,o=T[s],l=fe(o);l<e||l===e&&o.pre?t=s+1:n=s}return t}function it(e){(!T.length||!T.includes(e,Te&&e.allowRecurse?U+1:U))&&(e.id==null?T.push(e):T.splice(Mo(e.id),0,e),Jt())}function Jt(){!Te&&!rt&&(rt=!0,lt=Gt.then(Qt))}function Yt(e){m(e)?oe.push(...e):(!$||!$.includes(e,e.allowRecurse?W+1:W))&&oe.push(e),Jt()}function To(e){if(oe.length){const t=[...new Set(oe)];if(oe.length=0,$){$.push(...t);return}for($=t,process.env.NODE_ENV!=="production"&&(e=e||new Map),$.sort((n,s)=>fe(n)-fe(s)),W=0;W<$.length;W++)process.env.NODE_ENV!=="production"&&Xt(e,$[W])||$[W]();$=null,W=0}}const fe=e=>e.id==null?1/0:e.id,Bo=(e,t)=>{const n=fe(e)-fe(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Qt(e){rt=!1,Te=!0,process.env.NODE_ENV!=="production"&&(e=e||new Map),T.sort(Bo);const t=process.env.NODE_ENV!=="production"?n=>Xt(e,n):G;try{for(U=0;U<T.length;U++){const n=T[U];if(n&&n.active!==!1){if(process.env.NODE_ENV!=="production"&&t(n))continue;X(n,null,14)}}}finally{U=0,T.length=0,To(e),Te=!1,lt=null,(T.length||oe.length)&&Qt(e)}}function Xt(e,t){if(!e.has(t))e.set(t,1);else{const n=e.get(t);if(n>xo){const s=t.ownerInstance,o=s&&hn(s.type);return st(`Maximum recursive updates exceeded${o?` in component <${o}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}else e.set(t,n+1)}}const de=new Set;process.env.NODE_ENV!=="production"&&(Ct().__VUE_HMR_RUNTIME__={createRecord:ct(Io),rerender:ct(Po),reload:ct($o)});const Be=new Map;function Io(e,t){return Be.has(e)?!1:(Be.set(e,{initialDef:pe(t),instances:new Set}),!0)}function pe(e){return mn(e)?e.__vccOpts:e}function Po(e,t){const n=Be.get(e);!n||(n.initialDef.render=t,[...n.instances].forEach(s=>{t&&(s.render=t,pe(s.type).render=t),s.renderCache=[],s.effect.dirty=!0,s.update()}))}function $o(e,t){const n=Be.get(e);if(!n)return;t=pe(t),Zt(n.initialDef,t);const s=[...n.instances];for(const o of s){const l=pe(o.type);de.has(l)||(l!==n.initialDef&&Zt(l,t),de.add(l)),o.appContext.propsCache.delete(o.type),o.appContext.emitsCache.delete(o.type),o.appContext.optionsCache.delete(o.type),o.ceReload?(de.add(l),o.ceReload(t.styles),de.delete(l)):o.parent?(o.parent.effect.dirty=!0,it(o.parent.update)):o.appContext.reload?o.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}Yt(()=>{for(const o of s)de.delete(pe(o.type))})}function Zt(e,t){P(e,t);for(const n in e)n!=="__file"&&!(n in t)&&delete e[n]}function ct(e){return(t,n)=>{try{return e(t,n)}catch(s){console.error(s),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let se,Ie=[];function en(e,t){var n,s;se=e,se?(se.enabled=!0,Ie.forEach(({event:o,args:l})=>se.emit(o,...l)),Ie=[]):typeof window<"u"&&window.HTMLElement&&!((s=(n=window.navigator)==null?void 0:n.userAgent)!=null&&s.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(l=>{en(l,t)}),setTimeout(()=>{se||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Ie=[])},3e3)):Ie=[]}let L=null,Lo=null;function Ys(){}const Ao=Symbol.for("v-ndc"),jo=e=>e.__isSuspense;function Ho(e,t){t&&t.pendingBranch?m(e)?t.effects.push(...e):t.effects.push(e):Yt(e)}const Fo=Symbol.for("v-scx"),Ko=()=>{{const e=ns(Fo);return e||process.env.NODE_ENV!=="production"&&g("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}},Pe={};function zo(e,t,{immediate:n,deep:s,flush:o,once:l,onTrack:i,onTrigger:c}=F){if(t&&l){const d=t;t=(...ge)=>{d(...ge),me()}}process.env.NODE_ENV!=="production"&&s!==void 0&&typeof s=="number"&&g('watch() "deep" option with number value will be used as watch depth in future versions. Please use a boolean instead to avoid potential breakage.'),process.env.NODE_ENV!=="production"&&!t&&(n!==void 0&&g('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),s!==void 0&&g('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),l!==void 0&&g('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const u=d=>{g("Invalid watch source: ",d,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},f=q,E=d=>s===!0?d:re(d,s===!1?1:void 0);let h,k=!1,B=!1;if(M(e)?(h=()=>e.value,k=Ze(e)):ne(e)?(h=()=>E(e),k=!0):m(e)?(B=!0,k=e.some(d=>ne(d)||Ze(d)),h=()=>e.map(d=>{if(M(d))return d.value;if(ne(d))return E(d);if(b(d))return X(d,f,2);process.env.NODE_ENV!=="production"&&u(d)})):b(e)?t?h=()=>X(e,f,2):h=()=>(N&&N(),ue(e,f,3,[Z])):(h=G,process.env.NODE_ENV!=="production"&&u(e)),t&&s){const d=h;h=()=>re(d())}let N,Z=d=>{N=O.onStop=()=>{X(d,f,4),N=O.onStop=void 0}},A;if(ht)if(Z=G,t?n&&ue(t,f,3,[h(),B?[]:void 0,Z]):h(),o==="sync"){const d=Ko();A=d.__watcherHandles||(d.__watcherHandles=[])}else return G;let C=B?new Array(e.length).fill(Pe):Pe;const I=()=>{if(!(!O.active||!O.dirty))if(t){const d=O.run();(s||k||(B?d.some((ge,_t)=>te(ge,C[_t])):te(d,C)))&&(N&&N(),ue(t,f,3,[d,C===Pe?void 0:B&&C[0]===Pe?[]:C,Z]),C=d)}else O.run()};I.allowRecurse=!!t;let j;o==="sync"?j=I:o==="post"?j=()=>ln(I,f&&f.suspense):(I.pre=!0,f&&(I.id=f.uid),j=()=>it(I));const O=new Jn(h,G,j),me=()=>{O.stop()};return process.env.NODE_ENV!=="production"&&(O.onTrack=i,O.onTrigger=c),t?n?I():C=O.run():o==="post"?ln(O.run.bind(O),f&&f.suspense):O.run(),A&&A.push(me),me}function Uo(e,t,n){const s=this.proxy,o=x(e)?e.includes(".")?Wo(s,e):()=>s[e]:e.bind(s,s);let l;b(t)?l=t:(l=t.handler,n=t);const i=q;pt(this);const c=zo(o,l.bind(s),n);return i?pt(i):pn(),c}function Wo(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function re(e,t,n=0,s){if(!D(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(s=s||new Set,s.has(e))return e;if(s.add(e),M(e))re(e.value,t,n,s);else if(m(e))for(let o=0;o<e.length;o++)re(e[o],t,n,s);else if($n(e)||ee(e))e.forEach(o=>{re(o,t,n,s)});else if(jn(e))for(const o in e)re(e[o],t,n,s);return e}function qo(e,t,n=q,s=!1){if(n){const o=n[e]||(n[e]=[]),l=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;be(),pt(n);const c=ue(t,n,e,i);return pn(),Ve(),c});return s?o.unshift(l):o.push(l),l}else if(process.env.NODE_ENV!=="production"){const o=Hn(ot[e].replace(/ hook$/,""));g(`${o} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Go=(e=>(t,n=q)=>(!ht||e==="sp")&&qo(e,(...s)=>t(...s),n))("bum"),at=e=>e?ps(e)?hs(e)||e.proxy:at(e.parent):null,he=P(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>process.env.NODE_ENV!=="production"?Me(e.props):e.props,$attrs:e=>process.env.NODE_ENV!=="production"?Me(e.attrs):e.attrs,$slots:e=>process.env.NODE_ENV!=="production"?Me(e.slots):e.slots,$refs:e=>process.env.NODE_ENV!=="production"?Me(e.refs):e.refs,$parent:e=>at(e.parent),$root:e=>at(e.root),$emit:e=>e.emit,$options:e=>Qo(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,it(e.update)}),$nextTick:e=>e.n||(e.n=Do.bind(e.proxy)),$watch:e=>Uo.bind(e)}),Jo=e=>e==="_"||e==="$",ut=(e,t)=>e!==F&&!e.__isScriptSetup&&S(e,t),Yo={get({_:e},t){const{ctx:n,setupState:s,data:o,props:l,accessCache:i,type:c,appContext:u}=e;if(process.env.NODE_ENV!=="production"&&t==="__isVue")return!0;let f;if(t[0]!=="$"){const B=i[t];if(B!==void 0)switch(B){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return l[t]}else{if(ut(s,t))return i[t]=1,s[t];if(o!==F&&S(o,t))return i[t]=2,o[t];if((f=e.propsOptions[0])&&S(f,t))return i[t]=3,l[t];if(n!==F&&S(n,t))return i[t]=4,n[t];i[t]=0}}const E=he[t];let h,k;if(E)return t==="$attrs"?(v(e,"get",t),process.env.NODE_ENV!=="production"&&void 0):process.env.NODE_ENV!=="production"&&t==="$slots"&&v(e,"get",t),E(e);if((h=c.__cssModules)&&(h=h[t]))return h;if(n!==F&&S(n,t))return i[t]=4,n[t];if(k=u.config.globalProperties,S(k,t))return k[t];process.env.NODE_ENV!=="production"&&L&&(!x(t)||t.indexOf("__v")!==0)&&(o!==F&&Jo(t[0])&&S(o,t)?g(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):e===L&&g(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:e},t,n){const{data:s,setupState:o,ctx:l}=e;return ut(o,t)?(o[t]=n,!0):process.env.NODE_ENV!=="production"&&o.__isScriptSetup&&S(o,t)?(g(`Cannot mutate <script setup> binding "${t}" from Options API.`),!1):s!==F&&S(s,t)?(s[t]=n,!0):S(e.props,t)?(process.env.NODE_ENV!=="production"&&g(`Attempting to mutate prop "${t}". Props are readonly.`),!1):t[0]==="$"&&t.slice(1)in e?(process.env.NODE_ENV!=="production"&&g(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`),!1):(process.env.NODE_ENV!=="production"&&t in e.appContext.config.globalProperties?Object.defineProperty(l,t,{enumerable:!0,configurable:!0,value:n}):l[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:l}},i){let c;return!!n[i]||e!==F&&S(e,i)||ut(t,i)||(c=l[0])&&S(c,i)||S(s,i)||S(he,i)||S(o.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:S(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};process.env.NODE_ENV!=="production"&&(Yo.ownKeys=e=>(g("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(e)));function tn(e){return m(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Qo(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:l,config:{optionMergeStrategies:i}}=e.appContext,c=l.get(t);let u;return c?u=c:!o.length&&!n&&!s?u=t:(u={},o.length&&o.forEach(f=>$e(u,f,i,!0)),$e(u,t,i)),D(t)&&l.set(t,u),u}function $e(e,t,n,s=!1){const{mixins:o,extends:l}=t;l&&$e(e,l,n,!0),o&&o.forEach(i=>$e(e,i,n,!0));for(const i in t)if(s&&i==="expose")process.env.NODE_ENV!=="production"&&g('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const c=Xo[i]||n&&n[i];e[i]=c?c(e[i],t[i]):t[i]}return e}const Xo={data:nn,props:sn,emits:sn,methods:_e,computed:_e,beforeCreate:V,created:V,beforeMount:V,mounted:V,beforeUpdate:V,updated:V,beforeDestroy:V,beforeUnmount:V,destroyed:V,unmounted:V,activated:V,deactivated:V,errorCaptured:V,serverPrefetch:V,components:_e,directives:_e,watch:es,provide:nn,inject:Zo};function nn(e,t){return t?e?function(){return P(b(e)?e.call(this,this):e,b(t)?t.call(this,this):t)}:t:e}function Zo(e,t){return _e(on(e),on(t))}function on(e){if(m(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function V(e,t){return e?[...new Set([].concat(e,t))]:t}function _e(e,t){return e?P(Object.create(null),e,t):t}function sn(e,t){return e?m(e)&&m(t)?[...new Set([...e,...t])]:P(Object.create(null),tn(e),tn(t!=null?t:{})):t}function es(e,t){if(!e)return t;if(!t)return e;const n=P(Object.create(null),e);for(const s in t)n[s]=V(e[s],t[s]);return n}function ts(){return{app:null,config:{isNativeTag:Bn,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rn=null;function ns(e,t,n=!1){const s=q||L;if(s||rn){const o=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:rn._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&b(t)?t.call(s&&s.proxy):t;process.env.NODE_ENV!=="production"&&g(`injection "${String(e)}" not found.`)}else process.env.NODE_ENV!=="production"&&g("inject() can only be used inside setup() or functional components.")}const ln=Ho,os=e=>e.__isTeleport,cn=Symbol.for("v-fgt"),ss=Symbol.for("v-txt"),rs=Symbol.for("v-cmt");let le=null;function ls(e){return e?e.__v_isVNode===!0:!1}const is=(...e)=>fn(...e),an="__vInternal",un=({key:e})=>e!=null?e:null,Le=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?x(e)||M(e)||b(e)?{i:L,r:e,k:t,f:!!n}:e:null);function cs(e,t=null,n=null,s=0,o=null,l=e===cn?0:1,i=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&un(t),ref:t&&Le(t),scopeId:Lo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:L};return c?(ft(u,n),l&128&&e.normalize(u)):n&&(u.shapeFlag|=x(n)?8:16),process.env.NODE_ENV!=="production"&&u.key!==u.key&&g("VNode created with invalid key (NaN). VNode type:",u.type),!i&&le&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&le.push(u),u}const as=process.env.NODE_ENV!=="production"?is:fn;function fn(e,t=null,n=null,s=0,o=null,l=!1){if((!e||e===Ao)&&(process.env.NODE_ENV!=="production"&&!e&&g(`Invalid vnode type when creating vnode: ${e}.`),e=rs),ls(e)){const c=Ae(e,t,!0);return n&&ft(c,n),!l&&le&&(c.shapeFlag&6?le[le.indexOf(e)]=c:le.push(c)),c.patchFlag|=-2,c}if(mn(e)&&(e=e.__vccOpts),t){t=us(t);let{class:c,style:u}=t;c&&!x(c)&&(t.class=Ke(c)),D(u)&&(et(u)&&!m(u)&&(u=P({},u)),t.style=Fe(u))}const i=x(e)?1:jo(e)?128:os(e)?64:D(e)?4:b(e)?2:0;return process.env.NODE_ENV!=="production"&&i&4&&et(e)&&(e=p(e),g("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,e)),cs(e,t,n,s,o,i,l,!0)}function us(e){return e?et(e)||an in e?P({},e):e:null}function Ae(e,t,n=!1){const{props:s,ref:o,patchFlag:l,children:i}=e,c=t?ds(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&un(c),ref:t&&t.ref?n&&o?m(o)?o.concat(Le(t)):[o,Le(t)]:Le(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:process.env.NODE_ENV!=="production"&&l===-1&&m(i)?i.map(dn):i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==cn?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ae(e.ssContent),ssFallback:e.ssFallback&&Ae(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function dn(e){const t=Ae(e);return m(e.children)&&(t.children=e.children.map(dn)),t}function fs(e=" ",t=0){return as(ss,null,e,t)}function ft(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(m(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),ft(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(an in t)?t._ctx=L:o===3&&L&&(L.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else b(t)?(t={default:t,_ctx:L},n=32):(t=String(t),s&64?(n=16,t=[fs(t)]):n=8);e.children=t,e.shapeFlag|=n}function ds(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Ke([t.class,s.class]));else if(o==="style")t.style=Fe([t.style,s.style]);else if(In(o)){const l=t[o],i=s[o];i&&l!==i&&!(m(l)&&l.includes(i))&&(t[o]=l?[].concat(l,i):i)}else o!==""&&(t[o]=s[o])}return t}ts();let q=null,dt;{const e=Ct(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),l=>{o.length>1?o.forEach(i=>i(l)):o[0](l)}};dt=t("__VUE_INSTANCE_SETTERS__",n=>q=n),t("__VUE_SSR_SETTERS__",n=>ht=n)}const pt=e=>{dt(e),e.scope.on()},pn=()=>{q&&q.scope.off(),dt(null)};function ps(e){return e.vnode.shapeFlag&4}let ht=!1;function hs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Oo(wo(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in he)return he[n](e)},has(t,n){return n in t||n in he}}))}const _s=/(?:^|[-_])(\w)/g,ms=e=>e.replace(_s,t=>t.toUpperCase()).replace(/[-_]/g,"");function hn(e,t=!0){return b(e)?e.displayName||e.name:e.name||t&&e.__name}function _n(e,t,n=!1){let s=hn(t);if(!s&&t.__file){const o=t.__file.match(/([^/\\]+)\.\w+$/);o&&(s=o[1])}if(!s&&e&&e.parent){const o=l=>{for(const i in l)if(l[i]===t)return i};s=o(e.components||e.parent.type.components)||o(e.appContext.components)}return s?ms(s):n?"App":"Anonymous"}function mn(e){return b(e)&&"__vccOpts"in e}process.env.NODE_ENV,process.env.NODE_ENV,process.env.NODE_ENV;const gs=["id","multiple"],Es={key:1,class:"lkt-field__select"},ws=["innerHTML"],Ss=["title"],Ns=["innerHTML"],Os={key:2,class:"lkt-field__select-dropdown"},ys={class:"lkt-field__select-search-container"},bs={key:1,class:"lkt-field__select-options"},Vs=["onClick"],ks={key:0,class:"lkt-field__select-option"},Cs={key:2,class:"lkt-field-select__read"},vs=["innerHTML","title"],Rs={key:3,class:"lkt-field__state"},xs=["title"],Ds={key:3,class:"lkt-field-select__read-multiple"},Ms={key:0},Ts=["title"],Bs=["innerHTML"],Is={key:2,class:"lkt-field__state"},Ps=["title"],$s=["innerHTML"],Ls={name:"LktFieldSelect",inheritAttrs:!1},As=r.defineComponent({...Ls,props:{modelValue:{type:[String,Number,Array],default:""},class:{type:String,default:""},placeholder:{type:String,default:""},label:{type:String,default:""},palette:{type:String,default:""},name:{type:String,default:H.generateRandomString(16)},valid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},readMode:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},upperDropdown:{type:Boolean,default:!1},choiceDropdown:{type:Boolean,default:!1},allowReadModeSwitch:{type:Boolean,default:!1},switchEditionMessage:{type:String,default:""},emptyLabel:{type:Boolean,default:!1},options:{type:Array,default:()=>[]},disabledOptions:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},canTag:{type:Boolean,default:!1},noOptionsMessage:{type:String,default:Rn()},resource:{type:String,default:""},resourceData:{type:[Object],default:()=>({})},searchStringResourceParam:{type:String,default:"query"},searchPlaceholder:{type:String,default:""},useResourceSlot:{type:String,default:""},multipleDisplay:{type:String,default:"list"},multipleDisplayEdition:{type:String,default:"inline"}},emits:["update:modelValue","click-ui"],setup(e,{expose:t,emit:n}){const s=n,o=e,l=r.useSlots(),i=r.ref(null),c=r.ref(null),u=r.ref(null),f=r.ref(!o.readMode),E=H.generateRandomString(16),h=r.ref(new Ot(o.options)),k=r.ref(!1),B=r.ref(o.modelValue),N=r.ref(o.modelValue),Z=r.ref(!1),A=r.ref(!1),C=r.ref(!1),I=r.ref(h.value.all()),j=r.ref(h.value.all()),O=r.ref("");o.closeOnSelect===null?k.value=o.multiple===!0:k.value=o.closeOnSelect;const me=r.computed(()=>o.resource!==""),d=r.computed(()=>typeof o.valid=="function"?o.valid():o.valid),ge=r.computed(()=>N.value!==B.value),_t=r.computed(()=>{const a=["lkt-field","lkt-field-select"];return o.palette&&a.push(`lkt-field--${o.palette}`),ge.value&&a.push("is-changed"),o.class&&a.push(o.class),o.multiple&&a.push("is-multiple"),o.disabled&&a.push("is-disabled"),o.upperDropdown&&!o.choiceDropdown&&a.push("lkt-field-select-upper-dropdown"),o.choiceDropdown&&a.push("lkt-field-select-choice-dropdown"),C.value&&a.push("has-focus"),a.push(d.value?"is-valid":"is-error"),a.push(o.modelValue?"is-filled":"is-empty"),a.join(" ")}),Hs=r.computed(()=>{const a=[];return a.push(`lkt-field-select-read--${o.multipleDisplay}`),a.join(" ")}),Fs=r.computed(()=>{const a=[];return a.push(`lkt-field-select-read--${o.multipleDisplayEdition}`),a.join(" ")}),je=r.computed(()=>{let a={};return j.value.forEach(y=>{y.value==N.value&&(a=y)}),a}),mt=r.computed(()=>{let a="";return j.value.forEach(y=>{y.value==N.value&&(a=y.label)}),a}),gt=r.computed(()=>{let a=[];return o.multiple&&j.value.forEach(y=>{N.value.forEach(Se=>{Se==y.value&&a.push(y)})}),a}),Ee=()=>{j.value=h.value.all(),I.value=h.value.filter(O.value),A.value=!1},gn=()=>{O.value="",Ee()},En=async()=>{if(A.value=!1,me.value){A.value=!0;const a=JSON.parse(JSON.stringify(o.resourceData));o.searchStringResourceParam&&(a[o.searchStringResourceParam]=O.value);const y=await bn.httpCall(o.resource,a);h.value.receiveOptions(y.data),Ee()}else Ee()},Ks=()=>{N.value=B.value},zs=()=>o.modelValue,we=a=>{gn(),Et(a),C.value=!C.value,C.value&&r.nextTick(()=>{En(),i.value.focus(),r.nextTick(()=>{i.value.focus()})})};r.watch(()=>o.readMode,a=>f.value=!a),r.watch(()=>o.modelValue,a=>{N.value=a}),r.watch(N,a=>{s("update:modelValue",a),Z.value=!0,r.nextTick(()=>Z.value=!1)}),r.watch(O,Ee),r.watch(()=>o.options,a=>{h.value=new Ot(a)});const wn=a=>{if(o.multiple){let y=N.value.findIndex(Se=>Se==a.value);return typeof y>"u"&&(y=-1),y}return-1},Us=a=>{if(o.multiple){let y=wn(a);y===-1?N.value.push(a.value):N.value.splice(y,1)}else N.value=a.value,C.value=!1},Ws=a=>o.multiple?wn(a)!==-1:a.value==N.value,Et=a=>{if(!u.value.contains(a.target)){gn(),C.value=!1;return}},Sn=a=>{f.value=!f.value,f.value&&focus()};window.addEventListener("click",Et),Ee(),Go(()=>{window.removeEventListener("click",Et)}),t({reset:Ks,value:zs});const ie=r.computed(()=>o.useResourceSlot?o.useResourceSlot:o.resource),Nn=r.computed(()=>R.NO_OPTIONS_MESSAGE),wt=r.computed(()=>ie.value!==""&&typeof R.customResourceOptionSlots[ie.value]<"u"),St=r.computed(()=>R.customResourceOptionSlots[ie.value]),On=r.computed(()=>ie.value!==""&&typeof R.customResourceValueSlots[ie.value]<"u"),yn=r.computed(()=>R.customResourceValueSlots[ie.value]);return(a,y)=>{const Se=r.resolveComponent("lkt-field-text"),qs=r.resolveComponent("lkt-loader");return r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(_t.value),"data-show-ui":!1,ref:_=>u.value=_},[r.renderSlot(a.$slots,"prefix"),f.value?(r.openBlock(),r.createElementBlock("select",{key:0,ref:_=>c.value=_,id:r.unref(E),onFocus:r.withModifiers(we,["stop","prevent"]),onBlur:r.withModifiers(we,["stop","prevent"]),multiple:e.multiple,style:{height:"0",opacity:"0",width:"0"}},null,40,gs)):r.createCommentVNode("",!0),f.value?(r.openBlock(),r.createElementBlock("div",Es,[e.multiple?(r.openBlock(),r.createElementBlock("div",{key:1,class:"lkt-field__select-value-multiple",onClick:we},[r.createElementVNode("ul",{class:r.normalizeClass(Fs.value)},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(gt.value,_=>(r.openBlock(),r.createElementBlock("li",{title:_.label},[r.unref(l).option?r.renderSlot(a.$slots,"option",{key:0,option:_}):wt.value?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(St.value),{key:1,option:_},null,8,["option"])):(r.openBlock(),r.createElementBlock("div",{key:2,class:"lkt-field-select__read-value",innerHTML:_.label},null,8,Ns))],8,Ss))),256))],2)])):(r.openBlock(),r.createElementBlock("div",{key:0,class:"lkt-field__select-value",onClick:we},[r.unref(l).option?r.renderSlot(a.$slots,"option",{key:0,option:je.value}):r.createCommentVNode("",!0),wt.value?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(St.value),{key:1,option:je.value},null,8,["option"])):(r.openBlock(),r.createElementBlock("div",{key:2,class:"lkt-field-select__read-value",innerHTML:mt.value},null,8,ws))])),C.value?(r.openBlock(),r.createElementBlock("div",Os,[r.withDirectives(r.createElementVNode("div",ys,[r.createVNode(Se,{ref:_=>i.value=_,modelValue:O.value,"onUpdate:modelValue":y[0]||(y[0]=_=>O.value=_),placeholder:e.searchPlaceholder,tabindex:-1,class:"lkt-field__select-search",onKeyup:En},null,8,["modelValue","placeholder"])],512),[[r.vShow,e.searchable]]),A.value?(r.openBlock(),r.createBlock(qs,{key:0})):r.createCommentVNode("",!0),!e.readonly&&!A.value?(r.openBlock(),r.createElementBlock("ul",bs,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(I.value,_=>(r.openBlock(),r.createElementBlock("li",{class:r.normalizeClass(["lkt-field__select-option",{"is-active":e.multiple?Ws(_):_.value==N.value}]),onClick:r.withModifiers(Zs=>Us(_),["prevent","stop"])},[r.unref(l).option?r.renderSlot(a.$slots,"option",{key:0,option:_}):r.createCommentVNode("",!0),wt.value?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(St.value),{key:1,option:_},null,8,["option"])):(r.openBlock(),r.createElementBlock(r.Fragment,{key:2},[r.createTextVNode(r.toDisplayString(_.label),1)],64))],10,Vs))),256)),I.value.length===0&&(r.unref(l)["no-results"]||Nn.value)?(r.openBlock(),r.createElementBlock("li",ks,[r.unref(l)["no-results"]?r.renderSlot(a.$slots,"no-results",{key:0}):(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(Nn.value),1)],64))])):r.createCommentVNode("",!0)])):r.createCommentVNode("",!0)])):r.createCommentVNode("",!0)])):r.createCommentVNode("",!0),!f.value&&!e.multiple?(r.openBlock(),r.createElementBlock("div",Cs,[r.unref(l).value?r.renderSlot(a.$slots,"value",{key:0,option:je.value}):On.value?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(yn.value),{key:1,option:je.value},null,8,["option"])):(r.openBlock(),r.createElementBlock("div",{key:2,class:"lkt-field-select__read-value",innerHTML:mt.value,title:mt.value},null,8,vs)),e.allowReadModeSwitch?(r.openBlock(),r.createElementBlock("div",Rs,[r.createElementVNode("i",{class:"lkt-field__edit-icon",title:o.switchEditionMessage,onClick:Sn},null,8,xs)])):r.createCommentVNode("",!0)])):r.createCommentVNode("",!0),!f.value&&e.multiple?(r.openBlock(),r.createElementBlock("div",Ds,[e.multipleDisplay==="count"?(r.openBlock(),r.createElementBlock("div",Ms,r.toDisplayString(gt.value.length),1)):(r.openBlock(),r.createElementBlock("ul",{key:1,class:r.normalizeClass(Hs.value)},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(gt.value,_=>(r.openBlock(),r.createElementBlock("li",{title:_.label},[r.unref(l).value?r.renderSlot(a.$slots,"value",{key:0,option:_}):On.value?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(yn.value),{key:1,option:_},null,8,["option"])):(r.openBlock(),r.createElementBlock("div",{key:2,class:"lkt-field-select__read-value",innerHTML:_.label},null,8,Bs))],8,Ts))),256))],2)),e.allowReadModeSwitch?(r.openBlock(),r.createElementBlock("div",Is,[r.createElementVNode("i",{class:"lkt-field__edit-icon",title:o.switchEditionMessage,onClick:Sn},null,8,Ps)])):r.createCommentVNode("",!0)])):r.createCommentVNode("",!0),e.label?(r.openBlock(),r.createElementBlock("label",{key:4,innerHTML:e.label,onClick:r.withModifiers(we,["stop","prevent"])},null,8,$s)):r.createCommentVNode("",!0)],2)}}}),Xs="",js={install:e=>{e.component("lkt-field-select")===void 0&&e.component("lkt-field-select",As),e.component("lkt-loader")===void 0&&e.use(Cn.default),e.component("lkt-field-text")===void 0&&e.use(vn.default)}};w.default=js,w.setNoOptionsMessage=xn,w.setResourceOptionSlot=Dn,w.setResourceValueSlot=Mn,Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
